{"version":3,"sources":["assets/scripts/components/CompQuest.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+CAA0C;AAC1C,kDAA6C;AAC7C,0CAAqC;AACrC,wCAAmC;AAEnC,+DAA0D;AAG1D,6DAAqE;AAE/D,IAAA,KAA2C,EAAE,CAAC,UAAU,EAAtD,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,iBAAiB,uBAAkB,CAAC;AAE/D;IAAuC,6BAAY;IAAnD;QAAA,qEA0GC;QAvGU,cAAQ,GAAa,IAAI,CAAC;QAE1B,aAAO,GAAa,IAAI,CAAC;QAEzB,oBAAc,GAAa,IAAI,CAAC;QAEhC,eAAS,GAAa,IAAI,CAAC;QAE3B,aAAO,GAAa,IAAI,CAAC;QAEzB,aAAO,GAAY,IAAI,CAAC;QAExB,YAAM,GAAa,IAAI,CAAC;QAExB,kBAAY,GAAa,IAAI,CAAC;QAE9B,yBAAmB,GAAY,IAAI,CAAC;QAEpC,yBAAmB,GAAY,IAAI,CAAC;;IAqF/C,CAAC;IAnFG,wBAAI,GAAJ,UACI,QAAgB,EAChB,GAAW,EACX,IAAY,EACZ,WAAmB,EACnB,IAAY,EACZ,IAAY,EACZ,QAAgB,EAChB,KAAsB,EACtB,SAAa;QADb,sBAAA,EAAA,YAAsB;QAGtB,IAAM,YAAY,GAAG,eAAK,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC;QACxD,IAAI,YAAY,IAAI,SAAS,IAAI,8BAAQ,CAAC,kBAAkB,CAAC,QAAQ,EAAE,EAAE;YACrE,IAAI,QAAQ,IAAI,GAAG,EAAE;gBACjB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aAC3B;iBAAM;gBACH,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;aAC5B;SACJ;QAED,IAAM,oBAAoB,GAAG,eAAK,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,oBAAoB,CAAC;QACxE,IAAI,oBAAoB,IAAI,SAAS,IAAI,8BAAQ,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE;YACvE,IAAI,QAAQ,IAAI,GAAG,EAAE;gBACjB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aAC3B;iBAAM;gBACH,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;aAC5B;SACJ;QAED,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAG,QAAQ,IAAI,GAAG,aAAM,GAAG,IAAI,GAAG,CAAE,CAAC;QAC5D,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,IAAI,GAAG,CAAC;QAClC,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QACrF,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;QACrD,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;QACnD,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,wCAAkB,CAAC,SAAS,CAAC,IAAI,UAAU,CAAC;QAEjE,IAAI,CAAC,mBAAmB,CAAC,MAAM,GAAG,IAAI,GAAG,CAAC,CAAC;QAC3C,IAAI,CAAC,mBAAmB,CAAC,MAAM,GAAG,IAAI,GAAG,CAAC,CAAC;QAE3C,IAAI,QAAQ,IAAI,GAAG,EAAE;YACjB,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1D,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC;YAC5B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACxC;aAAM;YACH,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,GAAG,IAAI,CAAC;YACzD,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SACzC;QAED,IAAI,CAAC,KAAK,IAAI,QAAQ,EAAE;YACpB,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE;gBACzC,kBAAQ,CAAC,OAAO,CAAC,kBAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;gBAC/C,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC;gBAChC,cAAI,CAAC,WAAW,CACZ,mBAAS,CAAC,KAAK,EACf;oBACI,SAAS,EAAE,wBAAc,CAAC,cAAc,CAAC,gBAAgB;oBACzD,IAAI,EAAE,SAAS;iBAClB,EACD,UAAC,CAAC,IAAO,OAAO,CAAC,GAAG,CAAC,gBAAc,SAAW,CAAC,CAAA,CAAC,CAAC,EACjD,OAAO,CAAC,KAAK,CAChB,CAAC;YACN,CAAC,CAAC,CAAC;YACH,OAAO;SACV;QAED,IAAI,KAAK,EAAE;YACP,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE;gBACzC,kBAAQ,CAAC,OAAO,CAAC,kBAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;gBAC/C,KAAK,CAAC,QAAQ,CAAC,CAAC;gBAChB,cAAI,CAAC,WAAW,CACZ,mBAAS,CAAC,KAAK,EACf;oBACI,SAAS,EAAE,wBAAc,CAAC,cAAc,CAAC,gBAAgB;oBACzD,IAAI,EAAE,SAAS;iBAClB,EACD,UAAC,CAAC,IAAO,OAAO,CAAC,GAAG,CAAC,gBAAc,SAAW,CAAC,CAAA,CAAC,CAAC,EACjD,OAAO,CAAC,KAAK,CAChB,CAAC;YACN,CAAC,CAAC,CAAC;YACH,OAAO;SACV;IACL,CAAC;IAtGD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;+CACc;IAEjC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;8CACa;IAEhC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;qDACoB;IAEvC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;gDACe;IAElC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;8CACa;IAEhC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8CACa;IAE/B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;6CACY;IAE/B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;mDACkB;IAErC;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0DACyB;IAE3C;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;0DACyB;IArB1B,SAAS;QAD7B,OAAO;OACa,SAAS,CA0G7B;IAAD,gBAAC;CA1GD,AA0GC,CA1GsC,EAAE,CAAC,SAAS,GA0GlD;kBA1GoB,SAAS","file":"","sourceRoot":"/","sourcesContent":["import SoundMgr from \"../common/SoundMgr\";\nimport APIDefine from \"../src/app/APIDefine\";\nimport store from \"../src/app/store\";\nimport wsgw from \"../src/app/wsgw\";\nimport GameDefine from \"../src/common/GameDefine\";\nimport TrackingDefine from \"../src/common/TrackingDefine\";\nimport { EAppPages, EAppPopups, PAGE_SHOW_EFFECT, popPage, pushPopup } from \"../src/features/SliceApp\";\nimport Helper from \"../utils/Helper\";\nimport { Missions, MissionsButtonText } from \"./CompQuestsContainer\";\n\nconst { ccclass, property, executeInEditMode } = cc._decorator;\n@ccclass\nexport default class CompQuest extends cc.Component {\n\n    @property(cc.Label)\n    public progress: cc.Label = null;\n    @property(cc.Label)\n    public nameTxt: cc.Label = null;\n    @property(cc.Label)\n    public descriptionTxt: cc.Label = null;\n    @property(cc.Label)\n    public ticketTxt: cc.Label = null;\n    @property(cc.Label)\n    public coinTxt: cc.Label = null;\n    @property(cc.Node)\n    public btnDoit: cc.Node = null;\n    @property(cc.Label)\n    public btnTxt: cc.Label = null;\n    @property(cc.Label)\n    public completedTxt: cc.Label = null;\n    @property(cc.Node)\n    public rewardTurnContainer: cc.Node = null;\n    @property(cc.Node)\n    public rewardCoinContainer: cc.Node = null;\n\n    init(\n        progress: number,\n        max: number,\n        name: string,\n        description: string,\n        coin: number,\n        turn: number,\n        deeplink: string,\n        btnCB: Function = null,\n        questCode: '',\n    ) {\n        const verifiedUser = store.getState().user.verifiedUser;\n        if (verifiedUser && questCode == Missions.XAC_THUC_THONG_TIN.toString()) {\n            if (progress >= max) {\n                this.node.active = true;\n            } else {\n                this.node.active = false;\n            }\n        }\n\n        const customerSourceLinked = store.getState().user.customerSourceLinked;\n        if (customerSourceLinked && questCode == Missions.LIEN_KET_THE.toString()) {\n            if (progress >= max) {\n                this.node.active = true;\n            } else {\n                this.node.active = false;\n            }\n        }\n\n        this.progress.string = `${progress || '0'} / ${max || '0'}`;\n        this.nameTxt.string = name || '-';\n        this.descriptionTxt.string = description ? description.split('\\\\n').join('\\n') : '-';\n        this.ticketTxt.string = turn ? turn.toString() : '0';\n        this.coinTxt.string = coin ? coin.toString() : '0';\n        this.btnTxt.string = MissionsButtonText[questCode] || 'Tham gia';\n\n        this.rewardCoinContainer.active = coin > 0;\n        this.rewardTurnContainer.active = turn > 0;\n\n        if (progress >= max) {\n            this.btnDoit.getComponent(cc.Button).interactable = false;\n            this.btnDoit.active = false;\n            this.completedTxt.node.active = true;\n        } else {\n            this.btnDoit.getComponent(cc.Button).interactable = true;\n            this.btnDoit.active = true;\n            this.completedTxt.node.active = false;\n        }\n\n        if (!btnCB && deeplink) {\n            this.btnDoit.on(cc.Node.EventType.TOUCH_END, () => {\n                SoundMgr.playSfx(SoundMgr.Instance.SFX_BUTTON);\n                window.location.href = deeplink;\n                wsgw.userRequest(\n                    APIDefine.track,\n                    {\n                        eventName: TrackingDefine.TrackingEvents.CLICK_ON_MISSION,\n                        data: questCode\n                    },\n                    (e) => { console.log(`TRACKING - ${questCode}`) },\n                    console.error\n                );\n            });\n            return;\n        }\n\n        if (btnCB) {\n            this.btnDoit.on(cc.Node.EventType.TOUCH_END, () => {\n                SoundMgr.playSfx(SoundMgr.Instance.SFX_BUTTON);\n                btnCB(deeplink);\n                wsgw.userRequest(\n                    APIDefine.track,\n                    {\n                        eventName: TrackingDefine.TrackingEvents.CLICK_ON_MISSION,\n                        data: questCode\n                    },\n                    (e) => { console.log(`TRACKING - ${questCode}`) },\n                    console.error\n                );\n            });\n            return;\n        }\n    }\n}\n"]}