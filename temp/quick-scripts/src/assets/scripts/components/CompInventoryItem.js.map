{"version":3,"sources":["assets/scripts/components/CompInventoryItem.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,+BAAgC;AAChC,+CAA0C;AAC1C,+CAA0C;AAC1C,qDAAmD;AACnD,0CAAqC;AACrC,6CAAwD;AACxD,qDAAiE;AAE3D,IAAA,KAA2C,EAAE,CAAC,UAAU,EAAtD,OAAO,aAAA,EAAE,QAAQ,cAAA,EAAE,iBAAiB,uBAAkB,CAAC;AAG/D;IAA+C,qCAAY;IAA3D;QAAA,qEA6BC;QA3BU,WAAK,GAAc,IAAI,CAAC;QAExB,cAAQ,GAAa,IAAI,CAAC;QAE1B,aAAO,GAAa,IAAI,CAAC;QAEzB,oBAAc,GAAa,IAAI,CAAC;QAEhC,aAAO,GAAa,IAAI,CAAC;;IAmBpC,CAAC;IAjBG,gCAAI,GAAJ,UAAK,IAAY,EAAE,KAAa,EAAE,KAAa,EAAE,UAAkB;QAC/D,IAAM,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;QAClC,IAAM,IAAI,GAAG,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,GAAG,yBAAiB,CAAC,KAAK,CAAC,GAAG,wBAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC9G,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;QACxC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,yCAAmB,yBAAiB,CAAC,KAAK,CAAC,WAAG,CAAA;QAC3E,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,KAAK,SAAS,CAAC;QACrD,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;QAC1F,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,kBAAQ,CAAC,QAAQ,CAAC,YAAU,IAAM,CAAC,CAAC;QAE7D,IAAI,IAAI,KAAK,SAAS,EAAE;YACpB,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE;gBACtC,kBAAQ,CAAC,OAAO,CAAC,kBAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;gBAC/C,eAAK,CAAC,QAAQ,CAAC,oBAAS,CAAC,qBAAU,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC3D,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IA1BD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;oDACW;IAE/B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;uDACc;IAEjC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;sDACa;IAEhC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;6DACoB;IAEvC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;sDACa;IAVf,iBAAiB;QADrC,OAAO;OACa,iBAAiB,CA6BrC;IAAD,wBAAC;CA7BD,AA6BC,CA7B8C,EAAE,CAAC,SAAS,GA6B1D;kBA7BoB,iBAAiB","file":"","sourceRoot":"/","sourcesContent":["import * as moment from 'moment'\nimport FrameMgr from '../common/FrameMgr';\nimport SoundMgr from '../common/SoundMgr';\nimport { typeToUnit } from '../Popups/PopupReward';\nimport store from '../src/app/store';\nimport { convertToCurrency } from \"../src/common/utils\";\nimport { pushPopup, EAppPopups } from '../src/features/SliceApp';\n\nconst { ccclass, property, executeInEditMode } = cc._decorator;\n\n@ccclass\nexport default class CompInventoryItem extends cc.Component {\n    @property(cc.Sprite)\n    public image: cc.Sprite = null;\n    @property(cc.Label)\n    public indexTxt: cc.Label = null;\n    @property(cc.Label)\n    public nameTxt: cc.Label = null;\n    @property(cc.Label)\n    public descriptionTxt: cc.Label = null;\n    @property(cc.Label)\n    public dateTxt: cc.Label = null;\n\n    init(type: string, index: number, value: number, timestampz: number) {\n        const sign = value > 0 ? '+' : '';\n        const name = type === 'VOUCHER' ? 'Voucher' : value ? sign + convertToCurrency(value) + typeToUnit[type] : '';\n        this.indexTxt.string = index.toString();\n        this.nameTxt.string = name;\n        this.descriptionTxt.string = `nạp điện thoại\\n${convertToCurrency(value)}đ`\n        this.descriptionTxt.node.active = type === 'VOUCHER';\n        this.dateTxt.string = moment(timestampz).format('HH:mm:ss-DD/MM/YYYY').replace('-', '\\n');\n        this.image.spriteFrame = FrameMgr.Instance[`REWARD_${type}`];\n\n        if (type === 'VOUCHER') {\n            this.node.on(cc.Node.EventType.TOUCH_END, () => {\n                SoundMgr.playSfx(SoundMgr.Instance.SFX_BUTTON);\n                store.dispatch(pushPopup(EAppPopups.PopupGoToVoucher));\n            });\n        }\n    }\n}\n"]}