{"version":3,"sources":["assets/scripts/src/features/SliceApp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { createSlice, PayloadAction, createSelector } from '@reduxjs/toolkit'\nimport Events from '../../common/Events'\nimport SoundMgr from '../../common/SoundMgr'\nimport { IUserProfile } from '../../common/UserProfile'\nexport enum PAGE_SHOW_EFFECT {\n  APPEAR,\n  SCALE,\n  FADE,\n  LEFT,\n  RIGHT,\n  UP,\n  DOWN,\n}\nexport enum EAppPages {\n  PageHome = 'PageHome',\n  PageRules = 'PageRules',\n  PageBuyTurn = 'PageBuyTurn',\n  PageInventory = 'PageInventory',\n  PageReward = 'PageReward',\n  PageSavenow = 'PageSavenow',\n  PageWeeklyPrizeHistory = 'PageWeeklyPrizeHistory',\n  PagePaynow = 'PagePaynow',\n  PageGuiTietKiem = 'PageGuiTietKiem',\n  PageEasyvay = 'PageEasyvay',\n  PageTienMat = 'PageTienMat',\n  PageMuaTruoc = 'PageMuaTruoc',\n}\nexport enum EAppPopups {\n  PopupCompleteQuest = 'PopupCompleteQuest',\n  PopupConfirmDoQuest = 'PopupConfirmDoQuest',\n  PopupDailyLogin = 'PopupDailyLogin',\n  PopupNewUserReward = 'PopupNewUserReward',\n  PopupError = 'PopupError',\n  PopupSpinError = 'PopupSpinError',\n  PopupOutOfTicket = 'PopupOutOfTicket',\n  PopupBuyTurn = 'PopupBuyTurn',\n  PopupBuyWeeklyTicket = 'PopupBuyWeeklyTicket',\n  PopupBuyWeeklyTicketSuccess = 'PopupBuyWeeklyTicketSuccess',\n  PopupDailySpinCapping = 'PopupDailySpinCapping',\n  PopupExitGame = 'PopupExitGame',\n  PopupReward = 'PopupReward',\n  PopupGoToVoucher = 'PopupGoToVoucher',\n  PopupIdleTooLong = 'PopupIdleTooLong',\n  PopupLostConnection = 'PopupLostConnection',\n  PopupSaveNowOverloaded = 'PopupSaveNowOverloaded',\n  PopupBuyTurnSuccess = 'PopupBuyTurnSuccess',\n  PopupWeeklyWinner = 'PopupWeeklyWinner',\n  PopupUpdateInfo = 'PopupUpdateInfo',\n  PopupErrorReload = 'PopupErrorReload',\n  PopupSpinSuccess = 'PopupSpinSuccess',\n  PopupLeaderboard = 'PopupLeaderboard',\n}\nexport interface IPageWithEffect {\n  page: EAppPages\n  effect?: PAGE_SHOW_EFFECT\n}\nexport interface IAppState {\n  pageStack: EAppPages[]\n  currentPage: EAppPages\n  effectType: PAGE_SHOW_EFFECT\n  tutorial: Boolean\n  popups: EAppPopups[]\n  popupEffect?: boolean\n}\nconst initAppState: IAppState = {\n  pageStack: [EAppPages.PageHome],\n  currentPage: EAppPages.PageHome,\n  effectType: PAGE_SHOW_EFFECT.APPEAR,\n  tutorial: false,\n  popups: [],\n  popupEffect: false,\n}\nconst app = createSlice({\n  name: 'app',\n  initialState: initAppState,\n  reducers: {\n    pushPage(state, { payload }: PayloadAction<EAppPages | IPageWithEffect>) {\n      if (state.currentPage != payload) {\n        if (typeof payload == 'object') {\n          state.pageStack.push(payload.page)\n          state.effectType = payload.effect || PAGE_SHOW_EFFECT.APPEAR\n        } else {\n          state.pageStack.push(payload)\n        }\n        state.currentPage = state.pageStack[state.pageStack.length - 1]\n      }\n    },\n    popPage(state) {\n      state.pageStack.pop()\n      state.effectType = PAGE_SHOW_EFFECT.RIGHT\n      if (state.pageStack.length <= 0) {\n        state.pageStack.push(EAppPages.PageHome)\n      }\n      state.currentPage = state.pageStack[state.pageStack.length - 1]\n    },\n    pushPageFromMenu(state, { payload }: PayloadAction<EAppPages>) {\n      if (state.currentPage != payload) {\n        state.pageStack.push(payload)\n        state.currentPage = payload\n        state.effectType = PAGE_SHOW_EFFECT.LEFT\n      }\n    },\n    popToPage(state, { payload }: PayloadAction<EAppPages | IPageWithEffect>) {\n      if (state.currentPage != payload) {\n        let page\n        if (typeof payload == 'object') {\n          page = payload.page\n          state.effectType = payload.effect || PAGE_SHOW_EFFECT.APPEAR\n        } else {\n          page = payload\n        }\n        let index = state.pageStack.indexOf(page)\n        if (index < 0) index = state.pageStack.indexOf(EAppPages.PageHome)\n        if (index >= 0) state.pageStack = state.pageStack.slice(0, index + 1)\n        state.currentPage = state.pageStack[state.pageStack.length - 1]\n      }\n    },\n    pushPopup(state, { payload }: PayloadAction<EAppPopups>) {\n      SoundMgr.playSfx(SoundMgr.Instance.SFX_POPUP);\n      console.log('pushpopup', payload)\n      if (\n        state.popups.length > 0 &&\n        state.popups[state.popups.length - 1] != payload\n      ) {\n        state.popups.push(payload)\n      } else if (state.popups.length == 0) {\n        state.popups.push(payload)\n      }\n    },\n    popPopup(state, { payload }: PayloadAction<boolean> = null) {\n      if (state.popups.length > 0) {\n        if (payload) {\n          state.popupEffect = payload\n        }\n        state.popups.pop()\n      }\n    },\n    removeEffect(state) {\n      // state.popupEffect = false\n    },\n  },\n})\nexport const {\n  pushPage,\n  popPage,\n  pushPageFromMenu,\n  popToPage,\n  pushPopup,\n  popPopup,\n  removeEffect,\n} = app.actions\nexport default app.reducer\n"]}