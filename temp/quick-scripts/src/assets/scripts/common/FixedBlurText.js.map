{"version":3,"sources":["assets/scripts/common/FixedBlurText.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAE5E,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA2C,iCAAY;IAAvD;QACI,wBAAwB;QAD5B,qEAyCC;QAtCG,eAAe;QACP,+BAAyB,GAAW,CAAC,CAAA;QACrC,WAAK,GAAa,IAAI,CAAC;;QAmC/B,iBAAiB;IACrB,CAAC;IAnCG,6BAAK,GAAL;QACI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QACzC,IAAI,CAAC,IAAI,CAAC,KAAK;YAAE,OAAM;QAEvB,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YACtB,IAAI,KAAK,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;YAClC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YACrB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YACrB,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,KAAK,CAAC;YAC7B,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,KAAK,CAAC;YAC/B,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,EAAE;gBACjD,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,KAAK,CAAC;gBAC1B,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC;aAC5B;SACJ;QACD,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE;YACvB,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,aAAa,EAAE;gBAC3G,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,yBAAyB,CAAC;gBACnD,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,yBAAyB,CAAC;aACrD;YACD,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,yBAAyB,CAAC;YACtD,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,IAAI,CAAC,yBAAyB,CAAC;YACxD,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,yBAAyB,CAAC;YACnD,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,yBAAyB,CAAC;SACtD;QAED,IAAI;YACA,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,CAAC;YACxD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,CAAC;SACpD;QAAC,WAAM;SAEP;IACL,CAAC;IAtCgB,aAAa;QADjC,OAAO;OACa,aAAa,CAyCjC;IAAD,oBAAC;CAzCD,AAyCC,CAzC0C,EAAE,CAAC,SAAS,GAyCtD;kBAzCoB,aAAa","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class FixedBlurText extends cc.Component {\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {}\n    private SCALE_RATIO_TO_FIXED_BLUR: number = 2\n    private label: cc.Label = null;\n    start() {\n        this.label = this.getComponent(cc.Label);\n        if (!this.label) return\n\n        if (this.node.scaleX < 1) {\n            let ratio = 1 / (this.node.scaleX)\n            this.node.scaleX = 1;\n            this.node.scaleY = 1;\n            this.label.fontSize /= ratio;\n            this.label.lineHeight /= ratio;\n            if (this.label.overflow == cc.Label.Overflow.SHRINK) {\n                this.node.height /= ratio;\n                this.node.width /= ratio;\n            }\n        }\n        if (this.node.scaleX == 1) {\n            if (this.label.overflow == cc.Label.Overflow.SHRINK || this.label.overflow == cc.Label.Overflow.RESIZE_HEIGHT) {\n                this.node.height *= this.SCALE_RATIO_TO_FIXED_BLUR;\n                this.node.width *= this.SCALE_RATIO_TO_FIXED_BLUR;\n            }\n            this.label.fontSize *= this.SCALE_RATIO_TO_FIXED_BLUR;\n            this.label.lineHeight *= this.SCALE_RATIO_TO_FIXED_BLUR;\n            this.node.scaleX /= this.SCALE_RATIO_TO_FIXED_BLUR;\n            this.node.scaleY /= this.SCALE_RATIO_TO_FIXED_BLUR;\n        }\n\n        try {\n            this.node.parent.getComponent(cc.Layout).updateLayout();\n            this.node.getComponent(cc.Layout).updateLayout();\n        } catch {\n\n        }\n    }\n\n    // update (dt) {}\n}\n"]}