{"version":3,"sources":["assets/scripts/Popups/PopupReward.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nimport * as R from 'ramda'\nimport FrameMgr from \"../common/FrameMgr\";\nimport SoundMgr from \"../common/SoundMgr\";\nimport { Missions } from '../components/CompQuestsContainer';\nimport { PageHome } from '../Pages/PageHome';\nimport connect from \"../src/app/connect\";\nimport store, { RootState, AppDispatch } from \"../src/app/store\";\nimport { convertToCurrency } from '../src/common/utils';\nimport { EAppPages, IPageWithEffect, pushPage, popPopup, EAppPopups, pushPopup, PAGE_SHOW_EFFECT } from \"../src/features/SliceApp\";\nimport { DeeplinkTypesToName, EDeeplinkTypes } from '../src/features/SliceDeeplinks';\nimport Popup from './Popup';\n\nconst { ccclass, property } = cc._decorator;\n\nexport const typeToUnit = {\n    COIN: ' xu',\n    VOUCHER: 'đ',\n    EMONEY: 'đ',\n    TURN: ' vé',\n}\nexport class PopupReward extends Popup {\n    actions: any\n    props: any\n\n    @property(cc.Sprite)\n    public rewardSprite: cc.Sprite = null;\n    @property(cc.Node)\n    public confetti: cc.Node = null;\n    @property(cc.Label)\n    public amountTxt: cc.Label = null;\n    @property(cc.Label)\n    public voucherTxt: cc.Label = null;\n\n    @property(cc.Node)\n    public btnSpinMore: cc.Node = null;\n    @property(cc.Node)\n    public btnInventory: cc.Node = null;\n    @property(cc.Node)\n    public btnUpdateInfo: cc.Node = null;\n    @property(cc.Node)\n    public btnBack2: cc.Node = null;\n    @property(cc.Node)\n    public container: cc.Node = null;\n    @property(cc.Node)\n    public updateInfoContainer: cc.Node = null;\n\n    start() { }\n\n    onLoad() {\n        this.btnSpinMore.on(cc.Node.EventType.TOUCH_END, () => {\n            SoundMgr.playSfx(SoundMgr.Instance.SFX_BUTTON);\n            this.actions.popPopup();\n            this.actions.pushPage({ page: EAppPages.PageHome, effect: PAGE_SHOW_EFFECT.LEFT });\n            PageHome.Instance.pressButtonPlay();\n        });\n        this.btnInventory.on(cc.Node.EventType.TOUCH_END, () => {\n            SoundMgr.playSfx(SoundMgr.Instance.SFX_BUTTON);\n            this.actions.popPopup();\n            this.actions.pushPage({ page: EAppPages.PageInventory, effect: PAGE_SHOW_EFFECT.LEFT });\n        });\n\n        this.btnUpdateInfo.on(cc.Node.EventType.TOUCH_END, () => {\n            SoundMgr.playSfx(SoundMgr.Instance.SFX_BUTTON);\n            store.dispatch(popPopup())\n            this.actions.pushPage({ page: EAppPages.PageHome, effect: PAGE_SHOW_EFFECT.LEFT });\n            window.location.href = store.getState().deeplinks.data[DeeplinkTypesToName[EDeeplinkTypes.XAC_THUC_THONG_TIN]];\n        });\n\n        this.btnBack2.on(cc.Node.EventType.TOUCH_END, () => {\n            SoundMgr.playSfx(SoundMgr.Instance.SFX_BUTTON);\n            store.dispatch(popPopup())\n        });\n    }\n\n    onEnded() {\n    }\n    onEnable() {\n        super.onEnable();\n        const { type, amount } = R.view(R.lensPath(['reward', 'spinReward']))(this.props) || {}\n        this.rewardSprite.spriteFrame = FrameMgr.Instance[`REWARD_${type.toUpperCase()}`];\n        this.amountTxt.string = convertToCurrency(amount) + typeToUnit[type]\n        this.voucherTxt.node.active = type === 'VOUCHER'\n\n        this.confetti.children.forEach((fx) => {\n            fx.getComponent(sp.Skeleton).animation = 'animation'\n        })\n\n        const verifiedUser = store.getState().user.verifiedUser;\n        if (verifiedUser) {\n            this.updateInfoContainer.active = false;\n            this.container.setPosition(this.container.position.x, -200, this.container.position.z)\n        } else {\n            this.updateInfoContainer.active = true;\n            this.container.setPosition(this.container.position.x, 0, this.container.position.z)\n        }\n    }\n    onDisable() { }\n}\nconst mapStateToProps = (state: RootState) => ({\n    reward: state.reward,\n    quests: state.quests,\n})\nconst mapDispatchToAction = (dispatch: AppDispatch) => ({\n    pushPage: (payload: EAppPages | IPageWithEffect) =>\n        dispatch(pushPage(payload)),\n    popPopup: () => dispatch(popPopup()),\n    pushPopup: (payload: EAppPopups) => dispatch(pushPopup(payload)),\n})\nexport default connect(mapStateToProps, mapDispatchToAction)(PopupReward)"]}